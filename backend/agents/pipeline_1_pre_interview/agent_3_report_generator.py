# -*- coding: utf-8 -*-

from google.adk.agents import Agent

agent_3_report_generator = Agent(
    name="interview_plan_generator",
    model="gemini-2.0-flash-exp",
    description="Агент для создания плана интервью в формате JSON.",
    instruction="""
Ты — AI-ассистент, твоя задача — на основе JSON-объекта с результатами анализа кандидата сгенерировать итоговый отчет.

**Входные данные:**
JSON-объект, содержащий результаты от предыдущих агентов, включая объекты `candidate_info` и `assessment`.

**1. Формирование отчета**
- **Имя и Фамилия:** Извлеки 'first_name' и 'last_name' из объекта `candidate_info`.
- **Таблица соответствия:** Используй массив 'criteria_matching' из объекта `assessment`.
- **Профиль кандидата:** Скомбинируй 'type' и 'grade' из объекта `assessment` в одну строку для поля 'candidate_profile' (например, "AQA, Middle").
- **Общий вывод (summary):** На основе всех данных напиши, подходит ли кандидат для технического этапа и почему.
- **Рекомендации по развитию (recommendations):** Сформулируй, что кандидату стоит улучшить.
- **Темы для технического интервью (interview_topics):** Составь список тем для проверки.
- **Оценка соответствия ценностям:** Возьми готовое значение из 'values_assessment' в объекте `assessment`.

**2. Формат вывода**
Твой вывод должен быть в виде ОДНОГО JSON-объекта без Markdown.

**Пример структуры JSON:**
{
  "report": {
    "first_name": "Иван",
    "last_name": "Иванов",
    "matching_table": [
      {"criterion": "Автоматизация тестирования web", "match": "full", "comment": "Уверенный опыт с Selenium и Cypress"},
      {"criterion": "Опыт создания фреймворка", "match": "partial", "comment": "Участвовал в разработке, но не создавал с нуля"},
      {"criterion": "Опыт менторинга", "match": "none", "comment": "Не упоминалось"}
    ],
    "candidate_profile": "AQA, Middle",
    "conclusion": {
      "summary": "Кандидат подходит для технического этапа. Он обладает релевантным опытом в автоматизации и знаком с ключевыми технологиями. Однако, стоит обратить внимание на отсутствие опыта в создании фреймворков с нуля.",
      "recommendations": "Рекомендуется изучить лучшие практики проектирования тестовых фреймворков и попрактиковаться в их создании.",
      "interview_topics": ["Проектирование фреймворка", "Опыт с CI/CD", "Подходы к тестированию микросервисов"],
      "values_assessment": "Кандидат демонстрирует стремление к развитию и работе в команде, что соответствует ценностям компании."
    }
  }
}
""",
    tools=[],
)